<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="/admin/admin_layout">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Product Home page</title>
    <link rel="stylesheet" type="text/css" th:href="@{/pharmacy/bootstrap/css/bootstrap.min.css}"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css">
</head>

<body id="page-top">
<div layout:fragment="content">
    <div id="wrapper">
       
        <div class="d-flex flex-column" id="content-wrapper">
            <div id="content">
<!--                 <nav class="navbar navbar-light navbar-expand bg-white shadow mb-4 topbar static-top"> -->
<!--                     <div class="container-fluid"><button class="btn btn-link d-md-none rounded-circle mr-3" id="sidebarToggleTop" type="button"><i class="fas fa-bars"></i></button> -->
<!--                         <form class="form-inline d-none d-sm-inline-block mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search">
<!--                             <div class="input-group"><input class="bg-light form-control border-0 small" type="text" placeholder="Search..."> -->
<!--                                 <div class="input-group-append"><button class="btn btn-primary py-0" type="button"><i class="fas fa-search"></i></button></div> -->
<!--                             </div> -->
<!--                         </form> --> 
<!--                         <ul class="nav navbar-nav flex-nowrap ml-auto"> -->
<!--                             <li class="nav-item dropdown d-sm-none no-arrow"><a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false" href="#"><i class="fas fa-search"></i></a> -->
<!--                                 <div class="dropdown-menu dropdown-menu-right p-3 animated--grow-in" role="menu" aria-labelledby="searchDropdown"> -->
<!--                                     <form class="form-inline mr-auto navbar-search w-100"> -->
<!--                                         <div class="input-group"><input class="bg-light form-control border-0 small" type="text" placeholder="Search for ..."> -->
<!--                                             <div class="input-group-append"><button class="btn btn-primary py-0" type="button"><i class="fas fa-search"></i></button></div> -->
<!--                                         </div> -->
<!--                                     </form> -->
<!--                                 </div> -->
<!--                             </li> -->
<!--                             <li class="nav-item dropdown no-arrow mx-1" role="presentation"> -->
<!--                             <li class="nav-item dropdown no-arrow"> -->
<!--                                 <a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false" href="#"> -->
<!--                                     <span class="badge badge-danger badge-counter" th:text="${alertCount}">+</span><i class="fas fa-bell fa-fw"></i></a> -->
<!--                                 <div class="dropdown-menu dropdown-menu-right dropdown-list dropdown-menu-right animated--grow-in" role="menu"> -->
<!--                                     <h6 class="dropdown-header">alerts center</h6> -->
<!--                                     <a class="d-flex align-items-center dropdown-item" th:each="alert : ${alerts}" href="orders"> -->
<!--                                         <div class="mr-3"> -->
<!--                                             <div class="bg-success icon-circle"><i class="fas fa-donate text-white"></i></div> -->
<!--                                         </div> -->
<!--                                         <div><span class="small text-gray-500"><span th:text="${alert.alertDate}"></span></span> -->
<!--                                             <p>$<span th:text="${alert.content}"></span> order has been received!</p> -->
<!--                                         </div> -->
<!--                                     </a> -->
<!--                                     <a class="text-center dropdown-item small text-gray-500" href="#">Show All Alerts</a> -->
<!--                                 </div> -->
<!--                             </li> -->
<!--                             </li> -->
<!--                             <div class="d-none d-sm-block topbar-divider"></div> -->
<!--                             <li class="nav-item dropdown no-arrow" role="presentation"> -->
<!--                             <li class="nav-item dropdown no-arrow"><a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false" href="#"><span class="d-none d-lg-inline mr-2 text-gray-600 small" th:text="${userFullName}"></span><img class="border rounded-circle img-profile" src="/pharmacy/img/avatars/flat_business_man.png"></a> -->
<!--                                 <div -->
<!--                                         class="dropdown-menu shadow dropdown-menu-right animated--grow-in" role="menu"><a class="dropdown-item" role="presentation" href="/pharmacist/profile"><i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>&nbsp;Profile</a><a class="dropdown-item" role="presentation" href="#"><i class="fas fa-cogs fa-sm fa-fw mr-2 text-gray-400"></i>&nbsp;Settings</a> -->
<!--                                     <a -->
<!--                                             class="dropdown-item" role="presentation" href="#"><i class="fas fa-list fa-sm fa-fw mr-2 text-gray-400"></i>&nbsp;Activity log</a> -->
<!--                                     <div class="dropdown-divider"></div><a class="dropdown-item" role="presentation" href="#"> -->
<!--                                         <form th:action="@{/logout}" method="get"> -->
<!--                                             <button class="btn btn-md btn-danger btn-block" name="registration" -->
<!--                                                     type="Submit">Logout -->
<!--                                             </button> -->
<!--                                         </form> -->
<!--                                     </a> -->
<!--                                 </div> -->
<!--                             </li> -->
<!--                             </li> -->
<!--                     </ul> -->
<!--             </div> -->
<!--             </nav> -->
            <div class="container-fluid">
                <div class="d-sm-flex justify-content-between align-items-center mb-4">
                    <h3 class="text-dark mb-0">Products</h3>
                </div>
                <div class="row">
                    <div class="col-md-6 col-xl-3 mb-4">
                        <div class="card shadow border-left-primary py-2">
                            <div class="card-body">
                                <div class="row align-items-center no-gutters">
                                    <div class="col mr-2">
                                        <div class="text-uppercase text-primary font-weight-bold text-xs mb-1"><span>Total</span></div>
                                        <div class="text-dark font-weight-bold h5 mb-0"><span th:text="${totalProducts}"></span></div>
                                    </div>
                                    <div class="col-auto"><i class="fas fa-briefcase-medical fa-2x text-gray-300"></i></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-xl-3 mb-4">
                        <div class="card shadow border-left-success py-2">
                            <div class="card-body">
                                <div class="row align-items-center no-gutters">
                                    <div class="col mr-2">
                                        <div class="text-uppercase text-success font-weight-bold text-xs mb-1"><span>OUT OF STOCK</span></div>
                                        <div class="text-dark font-weight-bold h5 mb-0"><span th:text="${outOfStockProducts}"></span></div>
                                    </div>
                                    <div class="col-auto"><i class="fas fa-battery-empty fa-2x text-gray-300"></i></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <a href="products/add" class="btn btn-primary" role="button">Add Product</a>
                   <a th:href="@{'/admin/createExcelForProduct'}" style="float:right;"><img th:src="@{/images/excel.png}" style="width:40px;margin-left:10px;"></a>
                    <a th:href="@{'/admin/createPdfForProduct'}" style="float:right;"><img th:src="@{/images/pdf.png}" style="width:40px;"></a>
                    </div>
                </div>
                <br>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th><a th:href="@{'/admin/product/page/' + ${currentPage} + '?sortField=id&sortDir=' + ${reverseSortDir}}">
							Id</a></th>
                                <th><a th:href="@{'/admin/product/page/' + ${currentPage} + '?sortField=category&sortDir=' + ${reverseSortDir}}">
							Category</a></th>
                                <th><a th:href="@{'/admin/product/page/' + ${currentPage} + '?sortField=productCode&sortDir=' + ${reverseSortDir}}">
							Product Code</a></th>
                                <th><a th:href="@{'/admin/product/page/' + ${currentPage} + '?sortField=productName&sortDir=' + ${reverseSortDir}}">
							Product Name</a></th>
                                <th><a th:href="@{'/admin/product/page/' + ${currentPage} + '?sortField=quantity&sortDir=' + ${reverseSortDir}}">
							Quantity</a></th>
                                <th></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="product : ${products}">
                                <td><span th:text="${product.id}"></span></td>
                                <td><span th:text="${product.category}"></span></td>
                                <td><span th:text="${product.productCode}"></span></td>
                                <td><span th:text="${product.productName}"></span></td>   
                                <td><span th:text="${product.quantity}"></span></td> 
                                 <td>
                                    <span>
                                        <form method="POST" th:action="@{/admin/products/edit(productId=${product.id})}">
                                            <input type="submit" value="Edit" class="btn btn-outline-primary" />
                                        </form>
                                    </span>
                                </td>                   
                                <td>
                                    <span>
                                        <form method="POST" th:action="@{/products/delete(productId=${product.id})}">
                                            <input type="submit" value="Delete" class="btn btn-outline-danger" />
                                        </form>
                                    </span>
                                </td>
                               
                            </tr>
                        </tbody>
                    </table>
                        <div th:if = "${totalPages > 1}">
			<div class = "row col-sm-10">
				<div class = "col-sm-2">
					Total Rows: [[${totalItems}]] 
				</div>
				<div class = "col-sm-1">
					<span th:each="i: ${#numbers.sequence(1, totalPages)}">
						<a th:if="${currentPage != i}" th:href="@{'/admin/product/page/' + ${i}+ '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">[[${i}]]</a>
						<span th:unless="${currentPage != i}">[[${i}]]</span>  &nbsp; &nbsp;
					</span>
				</div>
				<div class = "col-sm-1">
					<a th:if="${currentPage < totalPages}" th:href="@{'/admin/product/page/' + ${currentPage + 1}+ '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Next</a>
					<span th:unless="${currentPage < totalPages}">Next</span>
				</div>
				
				 <div class="col-sm-1">
    				<a th:if="${currentPage < totalPages}" th:href="@{'/admin/product/page/' + ${totalPages}+ '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Last</a>
					<span th:unless="${currentPage < totalPages}">Last</span>
   				 </div>
			</div>
		</div>
                </div>
        </div>
        <footer class="bg-white sticky-footer">
            <div class="container my-auto">
                <div class="text-center my-auto copyright"><span>Copyright © MTS e-Store 2021</span></div>
            </div>
        </footer>
    </div><a class="border rounded d-inline scroll-to-top" href="#page-top"><i class="fas fa-angle-up"></i></a></div>
    </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js"></script>
    <script src="/pharmacy/js/bs-charts.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.js"></script>
    <script src="/pharmacy/js/theme.js"></script>
</body>

</html> 